---
applications:
  - name: cloud-native-chat
    memory: 1G
    instances: 2
    buildpacks:
      - java_buildpack_offline
    path: target/cloud-native-chat-demo-1.0.0.jar
    env:
      JBP_CONFIG_OPEN_JDK_JRE: '{ jre: { version: 21.+ } }'
      APP_VERSION: "1.0.0"
      APP_DEPLOYMENT_COLOR: "blue"
      SPRING_PROFILES_ACTIVE: "default"
      # JPA schema managed by db-initializer task
      SPRING_JPA_HIBERNATE_DDL_AUTO: "none"
    services:
      - chatqueue
      - demodb
    health-check-type: http
    health-check-http-endpoint: /actuator/health
    timeout: 180
    routes:
      - route: cloud-native-chat.apps.dhaka.cf-app.com
